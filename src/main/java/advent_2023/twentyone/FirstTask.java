package advent_2023.twentyone;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;

public class FirstTask {

    public static void main(String[] args) {
        var input = """
                ...................................................................................................................................
                ..#......##................#......#.#............#.....#....#.................#.......#.....#.#.....##.....#.#........#.#..#....#..
                .......#....###...###.........##...#.#..#.....#......#...#................................................#.........##.#.#..#..###.
                ....#.....#..#.#.....#....#.#.##.#..........#...#.......................#...##......#...#.#.#....###.....#....#......#....#...#.#..
                ..##.#......##...##......#...#.#.#..##.#......#.........#............................#.........#...................#....#........#.
                .#..........#....#.....#.....#..#.....#........#...........................#..#.#........#....#.#.....#.#...#..................#...
                .#.#.#.#.#............#.....#.....#....#...........#.........................................#...#.......#....#....#.......#..#..#.
                .#......##.#.#..............#....#.....####....#..#.............................#............#..............###.#.....#............
                ..#........#.........#....#................##..................#..#........................#.#.#.......###..#...#...#..............
                .......#........#.......##.#..#.............................#.........................#........#........#.#.#..##..#..#.#......#...
                .....#.#.#.##....................#.#.#....##.#....#...............#..###.......#.............#......#....#...#..#...............#..
                .#..#...#.........#............#..#......#.#.....#...........#....#.....#..........#...........##......##.....#.#........#.........
                ........#.....#..#......#....#.#........##.#...........................#.......................##.....##..#........#.#......#.#....
                ..........#..#...............#..#..........#...#..........#.....#..#...#...........#..................#...................###..#.#.
                .#..#......#..#...#.#..#.....#.....###.........#...........#.#............#........#.....###.......##.....#.#.#...........#........
                .#.....#....##..##..#...........#.....#.......#.........#...#..............##..........#...#..#..#...#............#.#.#.......#....
                .#..#.#.#.......#....................#................#.#................#..............#..#..##..#.#..#..###....#.....#..#........
                ...#.....#.......##..#............##.....#..#..........#......##.......#..............#.#..#.......#.........#.....................
                ..#.#.....#.......#....#.........##................##....#...#.......................................#.......#.#..##......#...#....
                ...........#.#.#.....#...#.#..#....#..#..............#.#.#....#....##...................#....#......#........#....#..##...#...#....
                ....#........#....#.#..##...##...................#.....#........#....#...#.#.#.#.............#.....#.#.......##..#.#.......#....#..
                .##.#....#.......#.#......##.....#.#.#............#.......#........#...........................#.......##...#...##....#.........#..
                .......#....#................#..##.............###.....#.............#....#......##........#.##...................#................
                ....#.......##.................#...................##..#..............#.......##..##...........#..##...#.#.....#...###.....#.......
                .#.............................##................#......#...#...........#.#.#......#...........##.....##................#.#........
                .#.##.#........##.........#.....##.#...........#...........#.#....##.....##.......#...........#..#.......#.##......#.....#...#...#.
                ...#...##.......#.#...#.......#...#.................#......#..#...............#.#.#........................#...........#.....#.....
                .......#.#...#..##.........#.....#........#..##.#.#....#........#..##..........#...#..#..............#......##..#....#.......#.....
                ...##.......#..#......#...........................#..#.........#.............##........#.........#...#................#..###.......
                .........................##................#.#...##....#......#.#..#....#....#....#..#..........................#.#..#.......#.....
                ....#.....#...#.........#..#............##...#..#........#........##.#..#...........#..........................#...#.....#......#..
                .......................#..............#..#...#...............#..#.#..#..#...#...#.#..........................#.......#..#..........
                ....##.#.............#...#.................##....#......#....#.##........#...............##............##.#.................#...#..
                ...#...#..#...........#........................#....#.#.......#..........#.......##.......................##..#.#....#...........#.
                ..............#......##............#...##.#..........#....#....#.......#...................##..............#...#........#..#..#....
                .......#............##..#.#........#....#.##....#.....#.#.#.....#......#....#..........#...#...#..................#....##..........
                .............#....#...#..#..............#.......#........##...#...#..#....#...........##....#............#....#...#.#.#........#...
                .#.....###.#.....................#..........#.#.....#..#...#.#.#.....................#.............................................
                .#...#...........#.....#...........#....#....##.........#..#......#..#....#.....#....#.#...#..................##.........#..#....#.
                .#.......#......................##.........................#....#...#......##......#........#......#.........#.......##.#...#......
                ....##...........#...#.......#.......##........#................#.......#.#.##.............#..#.#................##.....#..#...##..
                ..........#.#.................#..#..#...##.###.......##.#..#........##......##..##...#...#..#..#####.#.........#..#...#.#..........
                ..#....#..#.#...............#...............#.#..####......#..........##.#...##...#.#................#................#.##..##..#..
                ..........#....##..........#..............#.......#.......#.#...#..##.....................#.#.#....#...#...........#...............
                ...#.......#.................#...........#..#........#...#..............#..............#....#...##....................#...#........
                ...####...#.............##.....#............#.##.....#...#..#.#......#.............#.........##....##...................#.#...#....
                ....#.....#.............#.....##...#..#...........#..#.....#......#.#.....#......#.....#....#......#...............................
                .....#...#..##.............#....##...#.......#...##......##.....#.......#...#........................#.#.......................#.#.
                .###.....#...#................#....#.....................###.#....#..#.#....................#....................................#.
                ...#..................#..#..#........##....#..#.#.##..#.#...#.........#..#.#...#...............#...........##..........##.#........
                ...........#..................#.............#...#.#.#......###..........#...#.......#.......#....#........#.#...........##.........
                .......#..#.......##..#............................##.....#.#..#.......##.....#...#.......#...........#....#...#...................
                ...#.............#.................#.#.###......##.........####.....#..##.............#.......##.....#....................#........
                .#................#.#..#..#..#..##.....#.......#..#.....#.......#....#.......#.............#.##......#.#.....#..............#..#...
                .....#.................#...#....#.#...#.#......#.#...........#............#...#..........................###...#.................#.
                ...........................#..#.#..#...#...............#...#...#....#...........##...........#...#..#.#........#..###........#.....
                ..................##....##......##.#........#..#...........#......#..............#........#...#..............#...#.#..........##...
                ...#...............#...###..#...........#.....#.......##.#...#..........##.....#........#.#.#..................##..#............#..
                ..#........#......#.....#.........#.......##......#..........#...........#..#.##....#...................#.##.......##..........##..
                ...............#...##....###.........#...#..............#.#.......#...#.....#.........##..#.......##..............#................
                ............#........#......##.#................##...#.....##...#.....##.......#..................#........#.##.#.....#.##.........
                ..........#....#....#...##..#.#..........#.............##..#......#.#......#.#..............#........#...#..#............##........
                ...........#.......##...#......#..#......#.#.......#.........#...........#.....#..##...#...##..............##........#.#..#........
                ............#....#.......#..........#..##..#...##...#.#.#.....#............#.#.......#.#..#........##......#....#.#.....#..........
                .......................#...........##.#..........#.....#.#.#..........#.#.............................#....##.....##......#..#.....
                .................................................................S.................................................................
                .....#.##.#..........#..#..#........#.#...#......#......#....#.#.....#.#..............................#.............#.....#........
                ......#.....#....#..#........#.....#.........#........#..#...#.......#.#.....##.....##....#..#.#..#.#..........#....#...#..........
                ...................##....#........#.#.........#.......#........................#.....#.#...#..###.......###..#...#.....##..........
                .........#.#...#.#.#.#......#............#....#.#........................#.......#.#.#........#..............#..#.#...#............
                ...............#..#.#...#..#......#....#....#.......##...............#.#.#..#......#...##.........................#................
                .#.....................#..#..#..............#....#...#...#....##....#.#...#.......##.#...........###...#.......#####...............
                ..#........#............#.#...#.......#...#...........#......#....#...........#..#..............#....#..#...##.......#..........##.
                .#.#.....................#..............#.#.........#.#...............#......#......#.#..##...#......#......#........##............
                ..............#....#.#....##.##.....#........#...............#..........................#...#....#.##.........#....................
                ..................##...............##..#....##..............#.....#...#........#.#...#...............###....#................#.###.
                .#...#............#.#.#..##....#......#........#.#........#.....#......#.......##.....#.#.#.....................#..................
                ...#.#.............#.............#.#.##...#.#.............................................#....##..#.#.....#..................#....
                ......#............#...#.......#.#..#......#.......#.....#.#.......#...##....##....##.............####...................#..#......
                .........#........#.....#..#...........#.#.......##.#..#....#..#.....#.#..#.#....#......#...................#.............#....#.#.
                ......#................#..................#............#.............#.....#.........#...##.....#.#.##..#..###.........##.......#..
                .............................#....#.....#.#............##....#..#......#..#.#....#.................#....#...#.........#............
                ....#.#.....................#........#.........##..............#...#..............................#....#.................#.......#.
                .#..#.................#..........#..#....#........##..#...............#......####.....#....#.....#..#....###........#.#.........#..
                ....##........#.........#...#..##.#.##....#......##........#......###..........#.#...#....#..#......................#........##....
                ........#.....#.#.........#......#.#........#....#..##....##................##.......#...#........#...........................#....
                .#...........#............#..........#.......#.##.......#.#........#...#..###...#..#......#.............#................##....##..
                ..................#..........##...##....##.#.....#.....####........##........#...#.........#...#.....#..#...........##......#..#.#.
                ...............#.....................#................#...#....#......................#.#.......#...............#.....#......#...#.
                ...#............#.............#.##...................#....#...#.....#...#...........#.#...#........#................##.....#.......
                ...........#........#..................#.#..#.#.....#...............#.....#.#........##.......#..#.#..........#.............#......
                ..#.....#....#.#.................#.#.........#.......##.....#.........#.....#...............#.#...##.......................#....#..
                ......###....#....#.#..#....................#....#....#..#........#...#.#...##........#..##........#............#.........#....#.#.
                ...#.#.....#....#......#.........#..##...#.##...#....#..##..#.#........#..##.#.................#...................................
                .........###.#...#...#...........................#.........#.#.##....#.#...#..........#..#.......#.........##.....#......#...#.#...
                .................#.....#..........#.#..#..###..................#........##....#.........#...................#....#.........#.....#.
                .#..#....#..#...#.....#............#.#..........#....#.#..#..##......................#..#..#......................#.............#..
                ..#..#.#...#..#.....#...............................#.........##......#.............#.##...............#..#.##.......##..#.......#.
                .....#...#.#....#...#..#..............#......#.#................#....#..#...........#.....#.#................#.##.........##.......
                ....#......##.........#.#...#.........#......#.##...##........#....#.................#......................###......#.....##......
                ...#.#.....#.....#.#.#.#...............#..#.....#.#...............#.#.........##.....##..#...................#.......#.#...........
                ..#.....#..#.....#...##....##..##.........#...#....#....#...#......##.##..#..#.........#............#..#.##...................#....
                ...#....###...#..........##......#........#..........#.............###.....#.....#..#.#...............#...##....#...##..#..#...#.#.
                ...#................#.........#................#..#..#..#.#...............#.....#...................#.................#...#........
                .#.......#.#.#.#.......#...................#...#......##.....#........##.....#...#........................#..#..#....#......#..#...
                ..##..#....#...#.......#........#...#....................###........##............#...............#....#.......#............#......
                .#............#.....#...##....#.......................#..#....#........#..........#..#...........#..#........................#.....
                ..........###....#..#.#..#..#.........#.......#...#......#....#...#.............#............#.....................#.#...#.......#.
                ...#..#..............................#.........#........##....##....##..##.....##......................#........#.....#...#...#.#..
                .#.#.................##.......#.#.#.....................#.....#........#......##.............#.......#..##....##........#.#.#......
                ...##.#.#..#...#........#......#.....#....................#........#.#.....#...#................#........#...#.##.....#..#.......#.
                .##.#.......#..#....#..#....#......#.....................#...........#......#.#..............#...#......#.#.......#......#.#.......
                ....#................###...#.......#...#..##........#...................#.......................#..##.......#................###...
                .........##.....#.....##..........#....#..##.............#.....##......##....#..................#..##.................#...#........
                .#..#....#....#.#........#..#................#............#.......#........#...................................##........#.......#.
                .........##...#........#.#............#.......#..........#.................#..........................#......##.....#....#.#....##.
                ...##......................#.....#....#.##...................#.............#..............#....#......#.............#........#.....
                ....#...........##.......#...#.....#.......#..#................#........##......................#..#....#..##.....#.#..............
                ......#..#...#......#.......#.....#.#..........#................#................#.....#.#.#....#...#..............................
                ....#....#..#...##..##.......#...................##..............................#........#................#....#..........#..#.#..
                ....#...##.....##...#......#.............#.......#..............................#..........#...............................#.#.....
                .##.#.....#..#.......#..##................#..#..##..#..........#..............#..#.#....#.#..#..##.#....#.##..#............#.....#.
                ....#..#.#............##.....##.............###.#............#.#.....#....................#.#........#....#.#..#..#...........#.#..
                .#.......#..................#...................#....#..........#...........#....#......#.........#.............##...............#.
                ..#...............##..#.#...###.....#...#....#....#...#........#..#....................##.#.......#...#.......#................#...
                ..#.##..........##......#...#.#.#.#.....##.....#.##..#..#.........#........#....................#.................#............##..
                ....#...##.......##....##...#.#..............#.....#......................#.#......#...................#..#.#...##.#..........#..#.
                .#.#....#..##..#..............###.......................###................#..#..#..##....#....#............##..#..................
                ......#..#......#.........#.#.#...#.......................##..............##...#.....##.#....#......#....#.........#.......#.....#.
                ....#.........#...............#...#............#.........#................##.#..........#.............#.......................#.##.
                ...................................................................................................................................
                """;

        var map = input
                .lines()
                .map(String::toCharArray)
                .toArray(char[][]::new);

        var startPoint = findStartPoint(map);

        var pointsToCheck = new ArrayList<Point>();
        var visited = new HashSet<Point>();

        pointsToCheck.add(startPoint);
        visited.add(startPoint);

        int currentStep = 0;
        long result = 1;

        while (currentStep < 64) {
            currentStep++;

            var nextPoints = new ArrayList<Point>();

            for (var point : pointsToCheck) {
                for (var newPoint : List.of(
                        new Point(point.row + 1, point.col),
                        new Point(point.row - 1, point.col),
                        new Point(point.row, point.col + 1),
                        new Point(point.row, point.col - 1))
                ) {
                    if(newPoint.row < 0 || newPoint.row >= map.length
                            || newPoint.col < 0 || newPoint.col >= map[0].length) {
                        continue;
                    }

                    if (!visited.contains(newPoint)) {
                        if (map[newPoint.row][newPoint.col] != '#') {
                            nextPoints.add(newPoint);
                            visited.add(newPoint);
                        }
                    }
                }
            }

            if (currentStep % 2 == 0) {
                result += nextPoints.size();
            }
            pointsToCheck = nextPoints;
        }
        System.out.println(result);
    }

    private static Point findStartPoint(char[][] map) {
        for (int i = 0; i < map.length; i++) {
            for (int j = 0; j < map[0].length; j++) {
                if (map[j][i] == 'S') {
                    return new Point(i, j);
                }
            }
        }
        throw new RuntimeException("No start point found");
    }

    record Point(int row, int col) {
    }
}
